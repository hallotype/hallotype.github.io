<!DOCTYPE html>
<html lang="en" spellcheck="false">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Pan</title>

    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/project.css" />
    <link rel="stylesheet" href="css/main700.css" />
    <link rel="stylesheet" href="css/project700.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@300;600&display=swap"
    />
  </head>
  <body>
    <div id="tagline">
  <p>
    <br />&gt; <b><a href="https://hallotype.github.io/">HalloType</a></b> =
    Thom Janssen = font maker, type engineer, programmer, creative coder
    <a href="./type/fonts.html"
      ><span class="typelink"> > typefaces&nbsp;&nbsp;&nbsp;</span></a
    >
  </p>
</div>

<!-- <div id="gohere">
	↑↑↑
	<br/>
	go here!
</div>

<div id="construction">
	<br/>
&nbsp;← still<br/>
&nbsp;← under<br/>
&nbsp;↙︎ construction<br/>
&nbsp;↙︎

</div> -->

    <div id="main">
      <img src='content/pan/cover.png'/>
<p class="description">Pan is a variable type system. The idea is to slice the glyphs in various ways and draw contours with the slice-data. <br>
Since the drawings are not compatible, featureSubstitutions are needed. Currently three axes [Angle, Steps, Shape] controle what glyph is shown. A special set of tools was needed to create the GSUB table that can handle this.<br><br>

	I started creating this font system in 2017. Back then, in MacOS, only one axis was working for featureSubstitutions. Now in 2020, it seems that it is still not fully solved in MacOS. In browsers [Chrome / Firefox] it all works prefectly!
</p>
<img src='content/pan/SWITCH.gif'/>
<link rel="stylesheet" href="type/css/Pan_Clock.css" />
<style>
  #varUnit.w {
    background-color: #ffc600;
  }
  .Pan_Clock p {
    font-size: 266px;
    font-variation-settings: "wght" 30;
  }

  @media only screen and (max-width: 700px) {
    #varUnit.w {
      display: none;
    }
  }
</style>
<div class="Pan_Clock w" id="varUnit">
  <p contenteditable="false" class="lineView">
    <span class="H">H</span><span class="sep">:</span><span class="M">M</span
    ><span class="sep">:</span><span class="S">S</span><br />
  </p>
  <div></div>

  <script type="text/javascript">
    var wght = 30; //
    // https://codepen.io/jordantart/pen/QyJpyr
    //
    function clock_angles(hour, minute, second, milsec) {
      var minAngle = 360 * (minute / 60);
      var hourAngle = 360 * ((hour % 12) / 12) + (360 / 12) * (minute / 60);
      var secAngle = 360 * (second / 60);
      var milSecAngle = 360 * (milsec / 1000);

      return [hourAngle, minAngle, secAngle, milSecAngle];
    }

    var d = new Date(); // for now
    //d.getHours(); // => 9
    //d.getMinutes(); // =>  30
    //d.getSeconds(); // => 51
    var t = clock_angles(
      d.getHours(),
      d.getMinutes(),
      d.getSeconds(),
      d.getMilliseconds()
    );
    console.log(t);
    console.log();
    const Pan_ClockSliders = document.querySelector("#sliders-Pan_Clock");

    var joopie = setTimeout(Pan_ClockChanger, 0);
    function Pan_ClockChanger() {
      setTimeout(Pan_ClockChanger, 5);
      var d = new Date(); // for now
      var t = clock_angles(
        d.getHours(),
        d.getMinutes(),
        d.getSeconds(),
        d.getMilliseconds()
      );

      let fontElementsH = document.querySelectorAll(".H");
      fontElementsH.forEach(function (fontElement) {
        fontElement.style.cssText =
          "font-variation-settings:" +
          "'wght' " +
          wght +
          ",'ANGL' " +
          t[0] +
          ",'STEP' " +
          60;
      });

      let fontElementsM = document.querySelectorAll(".M");
      fontElementsM.forEach(function (fontElement) {
        fontElement.style.cssText =
          "font-variation-settings:" +
          "'wght' " +
          wght +
          ",'ANGL' " +
          t[1] +
          ",'STEP' " +
          60;
      });

      let fontElementsS = document.querySelectorAll(".S");
      fontElementsS.forEach(function (fontElement) {
        fontElement.style.cssText =
          "font-variation-settings:" +
          "'wght' " +
          wght +
          ",'ANGL' " +
          t[2] +
          ",'STEP' " +
          60;
      });

      // let fontElementsSep = document.querySelectorAll(".sep");
      // fontElementsSep.forEach(function (fontElement) {
      //   fontElement.style.cssText =
      //     "font-variation-settings:" +
      //     "'wght' " +
      //     wght +
      //     ",'ANGL' " +
      //     t[3] +
      //     ",'STEP' " +
      //     60;
      // });
    }
  </script>
</div>
<style>
   
</style>

<p class=""><br><br>Here is a visualisation of my workflow. </p>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.7.0/mermaid.min.js"></script>
<div class="mermaid">
%%{init: {'securityLevel': 'loose','theme': 'base', 'themeVariables': { 'fontFamily':'Source Code Pro',  'primaryColor': '#00CCCC', 'edgeLabelBackground':'#ffffee', 'tertiaryColor': '#fff0f0'}}}%%

    graph TD;
    PREF[Parameters and Settings];
    SD[Slice Data]
    DG[Draw Glyphs];
    ADDUFO[Add to UFO];
    OTFea[Generate OT Features];
    DSD[Generate Desingnspace Document];
    TTX1[Generate TTX FeatureVariations];
    ComVarTT[Compile VarTT];
    TTXextract[Extract GSUB table];
    MergeTables[Merge GSUB tables];
    ParseGSUB[Parse GSUB table];

    PREF --> SD;
    PREF --> DSD;
    PREF --> TTX1;

    SD --> DG --> ADDUFO --> OTFea;

    DSD --> ComVarTT --> TTXextract --> MergeTables --> ParseGSUB;

    TTX1 --> MergeTables;

    ComVarTT --> ParseGSUB


</div>
<link rel="stylesheet" href="type/css/panv2020.css" />
<div class="panv2020 varPlay" id="varUnit">
  <p contenteditable="true" class="lineView">AQUILAE</p>
  <div class="varSup" style="text-transform: capitalize" id="sliders-panv2020">
    <input
      type="range"
      class="ax"
      min="2.0"
      max="70.0"
      value="2.0"
      name="panv2020wght"
      id="panv2020wght"
    /><label for="panv2020wght">Weight</label><br /><input
      type="range"
      class="ax"
      min="0.0"
      max="312.0"
      value="0.0"
      name="panv2020ANGL"
      id="panv2020ANGL"
    /><label for="panv2020ANGL">Angle</label><br /><input
      type="range"
      class="ax"
      min="30.0"
      max="50.0"
      value="40.0"
      name="panv2020STEP"
      id="panv2020STEP"
    /><label for="panv2020STEP">Steps</label><br /><input
      type="range"
      class="ax"
      min="0.0"
      max="2.0"
      value="0.0"
      name="panv2020SHAP"
      id="panv2020SHAP"
    /><label for="panv2020SHAP">Shapes</label><br />
  </div>
  <script>
    const panv2020Sliders = document.querySelector("#sliders-panv2020");
    panv2020Sliders.oninput = panv2020Changer;
    function panv2020Changer(e) {
      let fontElements = document.querySelectorAll("div.panv2020");
      fontElements.forEach(function (fontElement) {
        fontElement.style.cssText =
          "font-variation-settings:" +
          "'wght' " +
          document.querySelector("#panv2020wght").value +
          ",'ANGL' " +
          document.querySelector("#panv2020ANGL").value +
          ",'STEP' " +
          document.querySelector("#panv2020STEP").value +
          ",'SHAP' " +
          document.querySelector("#panv2020SHAP").value;
      });
    }
  </script>
</div>

      <!-- <div id="bottomline">&nbsp;</div> -->
    </div>
  </body>
</html>
